<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:st1="urn:schemas-microsoft-com:office:smarttags"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 9">
<meta name=Originator content="Microsoft Word 9">
<link rel=File-List href="./f_files/filelist.xml">
<link rel=Edit-Time-Data href="./f_files/editdata.mso">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]-->
<title>Problem F - Dreadful Vectors</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>Shahriar Manzoor</o:Author>
  <o:LastAuthor>Shahriar Manzoor</o:LastAuthor>
  <o:Revision>36</o:Revision>
  <o:TotalTime>44</o:TotalTime>
  <o:LastPrinted>2003-07-25T05:02:00Z</o:LastPrinted>
  <o:Created>2003-05-16T04:48:00Z</o:Created>
  <o:LastSaved>2004-01-22T06:05:00Z</o:LastSaved>
  <o:Pages>2</o:Pages>
  <o:Words>507</o:Words>
  <o:Characters>2892</o:Characters>
  <o:Company>ACM/ICPC</o:Company>
  <o:Lines>24</o:Lines>
  <o:Paragraphs>5</o:Paragraphs>
  <o:CharactersWithSpaces>3551</o:CharactersWithSpaces>
  <o:Version>9.2720</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:View>Normal</w:View>
  <w:Zoom>95</w:Zoom>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
  <w:SpellingState>Clean</w:SpellingState>
  <w:GrammarState>Clean</w:GrammarState>
 </w:WordDocument>
</xml><![endif]-->
<style>
<!--
span.SPELLE
	{mso-spl-e:yes;}
span.GRAME
	{mso-gram-e:yes;}
 /* Font Definitions */
@font-face
	{font-family:Courier;
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:7 0 0 0 19 0;}
@font-face
	{font-family:"Arial Unicode MS";
	panose-1:2 11 6 4 2 2 2 2 2 4;
	mso-font-charset:128;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:-1 -369098753 63 0 4129023 0;}
@font-face
	{font-family:"\@Arial Unicode MS";
	mso-font-charset:128;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:-1 -369098753 63 0 4129279 0;}
 /* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
h1
	{mso-style-next:Normal;
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:1;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-font-kerning:0pt;
	font-weight:bold;}
p.MsoBodyText, li.MsoBodyText, div.MsoBodyText
	{margin:0in;
	margin-bottom:.0001pt;
	text-align:justify;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p
	{margin-right:0in;
	mso-margin-top-alt:auto;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
pre
	{margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt;
	font-size:10.0pt;
	font-family:"Courier New";
	mso-fareast-font-family:"Courier New";}
span.StyleArial16pt
	{mso-style-name:"Style Arial 16 pt";
	mso-ansi-font-size:16.0pt;
	mso-ascii-font-family:Arial;
	mso-hansi-font-family:Arial;
	mso-bidi-font-family:Arial;
	font-weight:bold;}
@page Section1
	{size:8.5in 11.0in;
	margin:.8in .8in .8in .8in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
-->
</style>
<!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="1027"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]--><o:SmartTagType namespaceuri="urn:schemas-microsoft-com:office:smarttags" name="PlaceName"/><o:SmartTagType namespaceuri="urn:schemas-microsoft-com:office:smarttags" name="PlaceType"/><o:SmartTagType namespaceuri="urn:schemas-microsoft-com:office:smarttags" name="City"/><o:SmartTagType namespaceuri="urn:schemas-microsoft-com:office:smarttags" name="country-region"/><o:SmartTagType namespaceuri="urn:schemas-microsoft-com:office:smarttags" name="place"/>
</head>

<body lang=EN-US style='tab-interval:.5in'>

<div class=Section1>

<p class=MsoNormal align=center style='text-align:center'><b style='mso-bidi-font-weight:
normal'><span style='font-size:28.0pt;mso-bidi-font-size:12.0pt;font-family:
Arial'>Problem F</span></b><span style='font-family:Arial'><br>
</span><b style='mso-bidi-font-weight:normal'><span style='font-size:20.0pt;
mso-bidi-font-size:24.0pt;font-family:Arial'>Dreadful Vectors</span></b><span
style='font-family:Arial'><br>
<b style='mso-bidi-font-weight:normal'>Input: </b><span style='mso-bidi-font-weight:
bold'>Standard Input<o:p></o:p></span></span></p>

<p class=MsoNormal align=center style='text-align:center'><b style='mso-bidi-font-weight:
normal'><span style='font-family:Arial'>Output: </span></b><span
style='font-family:Arial;mso-bidi-font-weight:bold'>Standard Output <o:p></o:p></span></p>

<p class=MsoNormal align=center style='text-align:center'><b style='mso-bidi-font-weight:
normal'><span style='font-family:Arial'>Time Limit: </span></b><span
style='font-family:Arial;mso-bidi-font-weight:bold'>1 Second</span></p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoBodyText>Tanvir and Taufiq are very afraid of vectors now-a-days.
It has become a regular incident to wake up from sleep after seeing the
nightmare: Arrows with pointed head chasing the two friends along the road.
It's not because they are weak in mathematics. Few weeks ago, as part of their
Interfacing Lab project, they made a vector calculation circuit which took
input strings from a PC via a parallel port and sent outputs back via a serial
port. The input string is an expression consisting of vectors and the output is
the result of the expression. The circuit was made of a lot of capacitors,
resistors, diodes and inductors, and was very powerful. But they had never
tested the circuit with illegal input strings before they showed their circuit
to their teacher on the project submission date. The teacher gave a wrong
expression as input, and something happened to the circuit: a resistor became
red-hot due to overheating, an capacitor leaked some liquid subtance on that
resistor, there were some chemical reaction between the heated leaked
substance, the zinc-coated lead of a diode and the PCB coating, ..., ..., the
power line got short circuited, ..., ..., (nobody knows what happened then)
..., and finally, the circuit exploded with the whole lab...</p>

<p class=MsoNormal style='text-align:justify'>&nbsp;<span style='font-family:
"Arial Unicode MS"'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'>What a costly input!</p>

<p class=MsoNormal style='text-align:justify'>&nbsp;</p>

<p class=MsoBodyText>But the teacher is not satisfied. He wants to test more.
He has told them to make the circuit again, and has assured them that he won't
give wrong input strings again. But Tanvir and Taufiq wants to be safe. They
want a computer program to predict the result of an input string before they
sends the string to their 'circuit-bomb'.</p>

<p style='text-align:justify'><b>Note: </b>In this problem, a scalar is an
integer. A vector consists of three scalar expressions separated by commas (<span
style='font-family:Courier'>','</span>) and surrounded by square brackets (<span
style='font-family:Courier'>'['</span> and <span style='font-family:Courier'>']'</span>).
As in vector algebra, addition (<span style='font-family:Courier'>'+'</span>)
and subtracton (<span style='font-family:Courier'>'-'</span>) is defined when
either both operands are scalars or both operands are vectors, and not allowed
between a scalar and a vector. Multiplication (<span style='font-family:Courier'>'*'</span>)
is allowed for any 'mixture' of operands: when both operands are vectors, it
means dot-product; otherwise it means scalar multiplication. Cross-product
operation between two vectors is denoted by small x character (<span
style='font-family:Courier'>'x'</span>). <span style='font-family:Courier'>'+'</span>
and <span style='font-family:Courier'>'-'</span> have the same precedence and
usual associativity (left-to-right). <span style='font-family:Courier'>'*'</span>
and <span style='font-family:Courier'>'x'</span> also have the same precedence
and usual associativity, but their precedence is higher than that of <span
style='font-family:Courier'>'+'</span> and <span style='font-family:Courier'>'-'</span>.
An expression inside parentheses (<span style='font-family:Courier'>'('</span>
and <span style='font-family:Courier'>')'</span>) has higher precedence than an
expression outside.</p>

<p class=MsoNormal><span class=StyleArial16pt><span style='font-size:16.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial;mso-bidi-font-family:"Times New Roman"'>Input</span></span><span
class=StyleArial16pt><span style='font-size:16.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial;mso-fareast-font-family:"Arial Unicode MS";mso-bidi-font-family:
"Times New Roman"'><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify'>Input consists of several input
strings, one in each line. The end of input is marked with a line consisting of
a single <span style='font-family:Courier'>'#'</span> mark. Input may contain
any character except <span style='font-family:Courier'>'#'</span> and can be
upto 100 characters long. All characters except space (ASCII 32), <span
style='font-family:Courier'>'+'</span>, <span style='font-family:Courier'>'-'</span>,
<span style='font-family:Courier'>'*'</span>, <span style='font-family:Courier'>'x'</span>,
<span style='font-family:Courier'>','</span>, <span style='font-family:Courier'>'['</span>
<span style='font-family:Courier'>']'</span>, <span style='font-family:Courier'>'('</span>
<span style='font-family:Courier'>')'</span> and digits are illegal. Integers
in input are always non-negative, but the result may be negative. Intermediate
and final values of scalars will have absolute value less than 2<sup>31</sup>.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span class=StyleArial16pt><span style='font-size:16.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial;mso-bidi-font-family:"Times New Roman"'>&nbsp;<o:p></o:p></span></span></p>

<p class=MsoNormal><span class=StyleArial16pt><span style='font-size:16.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial;mso-bidi-font-family:"Times New Roman"'>&nbsp;<o:p></o:p></span></span></p>

<p class=MsoNormal><span class=StyleArial16pt><span style='font-size:16.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial;mso-bidi-font-family:"Times New Roman"'>Output</span></span><span
class=StyleArial16pt><span style='font-size:16.0pt;mso-bidi-font-size:12.0pt;
font-family:Arial;mso-fareast-font-family:"Arial Unicode MS";mso-bidi-font-family:
"Times New Roman"'><o:p></o:p></span></span></p>

<p style='text-align:justify'>For each input, print the value of the expression
if there is no error. Otherwise, print the word 'Bang!'. There should be no
spaces in the output.</p>

<h1><span style='font-size:16.0pt;mso-bidi-font-size:12.0pt;font-family:Arial;
color:black'>Sample Input<span style="mso-spacerun:
yes">                                       </span>Output for Sample Input<o:p></o:p></span></h1>

<table border=1 cellspacing=0 cellpadding=0 bgcolor="#cccccc" style='background:
 #CCCCCC;border-collapse:collapse;border:none;mso-border-alt:solid windowtext .5pt;
 mso-padding-alt:0in 5.4pt 0in 5.4pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-lastrow:yes'>
  <td width=367 valign=top style='width:275.4pt;border:solid windowtext .5pt;
  padding:0in 5.4pt 0in 5.4pt'><pre><b><span style='font-size:11.0pt;
  mso-bidi-font-size:10.0pt'>[1,2,3] + [4,5,6]<o:p></o:p></span></b></pre><pre><b><span
  style='font-size:11.0pt;mso-bidi-font-size:10.0pt'>[ 1, 2, 3 ] * ( [ 4, 15, 6 ] * (2-1*1) )<o:p></o:p></span></b></pre><pre><b><span
  style='font-size:11.0pt;mso-bidi-font-size:10.0pt'>[1,2,3] x [4,5,6] x 2<o:p></o:p></span></b></pre><pre><b><span
  style='font-size:11.0pt;mso-bidi-font-size:10.0pt'>[ 1, 2 , 3, 4+5 ]<o:p></o:p></span></b></pre><pre><b><span
  style='font-size:11.0pt;mso-bidi-font-size:10.0pt'>#</span></b><b><span
  style='mso-bidi-font-size:12.0pt'><o:p></o:p></span></b></pre></td>
  <td width=288 valign=top style='width:3.0in;border:solid windowtext .5pt;
  border-left:none;mso-border-left-alt:solid windowtext .5pt;padding:0in 5.4pt 0in 5.4pt'><pre><b><span
  style='font-size:11.0pt;mso-bidi-font-size:10.0pt'>[5,7,9]<o:p></o:p></span></b></pre><pre><b><span
  style='font-size:11.0pt;mso-bidi-font-size:10.0pt'>52<o:p></o:p></span></b></pre><pre><b><span
  style='font-size:11.0pt;mso-bidi-font-size:10.0pt'>Bang!<o:p></o:p></span></b></pre><pre><b><span
  style='font-size:11.0pt;mso-bidi-font-size:10.0pt'>Bang!<o:p></o:p></span></b></pre>
  <p class=MsoNormal style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><![if !supportEmptyParas]>&nbsp;<![endif]><b><span
  style='font-size:11.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New"'><o:p></o:p></span></b></p>
  </td>
 </tr>
</table>


<div class=MsoNormal align=center style='text-align:center;tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>

<hr size=2 width="100%" align=center>

</div>


<h1 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'>Problemsetter:
Mustaq Ahmed, <span style='mso-bidi-font-size:10.0pt'>University of Waterloo</span></h1>

<p class=MsoNormal>&nbsp;</p>

</div>

</body>

</html>
